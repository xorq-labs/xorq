project:
  type: website

execute:
  mermaid: true
  
website:
  page-navigation: true
  title: "Xorq documentation"
  description: "Xorq documentation â€” build portable, multi-engine ML pipelines with deferred execution, caching, and lineage tracking. Tutorials, API reference, and guides."
  favicon: "style/favicon.ico"
  open-graph: true
  twitter-card: true

  page-footer:
    center: "This page is built with [Quarto](https://quarto.org/)."

  navbar:
    logo: "images/xorq-light-mode-logo.png"
    align: center
    title: false
    collapse-below: lg
    search: true

    right:
      - icon: github
        href: https://github.com/xorq-labs/xorq

    left:
      - href: getting_started/introduction.qmd
        text: "Get started"
      - href: tutorials/ml_tutorials/split_data_for_training.qmd
        text: "Tutorials"
      - href: guides/data_workflows/read_write_production_data.qmd
        text: "Guides"
      - href: concepts/understanding_xorq/overview.qmd
        text: "Concepts"
      - href: reference/index.qmd
        text: "Reference"
      - href: release_notes.qmd
        text: "Release notes"

  sidebar:
    - id: getting-started
      title: "Get started"
      collapse-level: 1
      pinned: true
      contents:
        - href: getting_started/introduction.qmd
        - href: getting_started/quickstart.qmd
        - href: getting_started/installation.qmd
          text: "Install Xorq"
        - href: getting_started/understand_deferred_execution.qmd
        - href: getting_started/explore_caching.qmd
        - href: getting_started/switch_backends.qmd
        
        # - href: getting_started/your_first_expression.qmd
        #   text: "Your first expression"

    - id: tutorials
      title: "Tutorials"
      collapse-level: 2
      pinned: true
      contents:
        - id: ml-tutorials-section
          section: "ML tutorials"
          contents:
            - href: tutorials/ml_tutorials/split_data_for_training.qmd
            - href: tutorials/ml_tutorials/train_your_first_model.qmd
            - href: tutorials/ml_tutorials/explore_model_evaluation.qmd
            # - href: tutorials/ml_tutorials/understand_step_and_pipeline.qmd
            # - href: tutorials/ml_tutorials/use_deferred_fit_predict.qmd
            - href: tutorials/ml_tutorials/deploy_your_first_model.qmd
        - id: ai-tutorials-section
          section: "AI tutorials"
          contents:
            - href: tutorials/ai_tutorials/your_first_udxf.qmd
            - href: tutorials/ai_tutorials/call_llms_from_expressions.qmd
            - href: tutorials/ai_tutorials/build_an_mcp_tool.qmd
            - href: tutorials/ai_tutorials/understand_flight_protocol.qmd
        - id: analytics-tutorials-section
          section: "Analytics tutorials"
          contents:
            # - href: tutorials/analytics_tutorials/query_across_engines.qmd
            - href: tutorials/analytics_tutorials/create_your_first_udf.qmd
            # - href: tutorials/analytics_tutorials/use_window_functions.qmd
            - href: tutorials/analytics_tutorials/work_with_schemas.qmd


    - id: guides
      title: "Guides"
      collapse-level: 2
      pinned: true
      contents:
        - id: data-workflows-section
          section: "Data Workflows"
          contents:
            - href: guides/data_workflows/read_write_production_data.qmd
            - href: guides/data_workflows/validate_data_in_xorq_pipelines.qmd
            - href: guides/data_workflows/transform_data_custom_udfs.qmd
            - href: guides/data_workflows/build_feature_pipelines.qmd
        - id: ml-workflows-section
          section: "ML workflows"
          contents:
            - href: guides/ml_workflows/integrate_sklearn_pipelines.qmd
            - href: guides/ml_workflows/train_models_at_scale.qmd
            - href: guides/ml_workflows/evaluate_model_performance.qmd
            # - href: guides/ml_workflows/deploy_models_to_production.qmd
        - id: performance-workflows-section
          section: "Performance workflows"
          contents:
            - href: guides/performance_workflows/optimize_pipeline_performance.qmd
            - href: guides/performance_workflows/optimize_model_serving.qmd
            # - href: guides/performance_workflows/manage_llm_costs.qmd
        - id: platform-workflows-section
          section: "Platform workflows"
          contents:
            # - href: guides/platform_workflows/build_reproducible_environments.qmd
            - href: guides/platform_workflows/manage_compute_catalog.qmd
            - href: guides/platform_workflows/setup_cicd_pipelines.qmd
            # - href: guides/platform_workflows/monitor_production_deployments.qmd
            # - href: guides/platform_workflows/handle_production_errors.qmd
            # - href: guides/platform_workflows/debug_pipeline_failures.qmd
        # - id: advanced-workflows-section
        #   section: "Advanced workflows"
        #   contents:
            # - href: guides/advanced_workflows/build_feature_store.qmd
            # - href: guides/advanced_workflows/integrate_existing_tools.qmd

    - id: concepts
      title: "Concepts"
      collapse-level: 2
      pinned: true
      contents:
        - id: fundamentals-section
          section: "Fundamentals"
          contents:
            - concepts/understanding_xorq/overview.qmd
            - concepts/understanding_xorq/how_xorq_works.qmd
            - concepts/understanding_xorq/why_deferred_execution.qmd
            - concepts/understanding_xorq/expression_format.qmd
        - id: execution-backends-section
          section: "Execution and backends"
          contents:
            - concepts/understanding_xorq/multi_engine_execution.qmd
            - concepts/understanding_xorq/intelligent_caching_system.qmd
            - concepts/core_concepts/profile_based_connections.qmd
        - id: reproducibility-section
          section: "Reproducibility"
          contents:
            - concepts/core_concepts/content_addressed_hashing.qmd
            - concepts/core_concepts/input_addressed_computation.qmd
            - concepts/core_concepts/build_system.qmd
            - concepts/core_concepts/compute_catalog.qmd
            - concepts/core_concepts/reproducible_environments_uv.qmd
        - id: advanced-capabilities-section
          section: "Advanced capabilities"
          contents:
            - concepts/core_concepts/user_defined_functions.qmd
            - concepts/core_concepts/user_defined_exchange_functions.qmd
            - concepts/core_concepts/serving_expressions_as_endpoints.qmd
            - concepts/core_concepts/data_lineage_tracking.qmd
            - concepts/core_concepts/feature_serving_patterns.qmd
            - concepts/core_concepts/batch_processing_llms.qmd
            - concepts/core_concepts/point_in_time_correctness.qmd

    - id: reference
      title: "Overview"
      collapse-level: 2
      pinned: true
      contents:
        - reference/index.qmd
        - href: reference/glossary.qmd
          text: "Glossary"
        - id: backends-section
          section: "Backends"
          contents:
            - href: api_reference/backends/index.qmd
              text: "Overview"
            - api_reference/backends/profiles_api.qmd
            - api_reference/backends/env_variables.qmd
            - api_reference/backends/supported_backends.qmd
        - id: cli-commands-section
          section: "CLI commands"
          contents:
            - api_reference/cli/index.qmd
            - api_reference/cli/init.qmd
            - api_reference/cli/build.qmd
            - api_reference/cli/uv-build.qmd
            - api_reference/cli/run.qmd
            - api_reference/cli/uv-run.qmd
            - api_reference/cli/serve-flight-udxf.qmd
            - api_reference/cli/serve-unbound.qmd
            - api_reference/cli/lineage.qmd
            - api_reference/cli/ps.qmd
            - id: catalog-section
              section: "catalog"
              contents:
                - api_reference/cli/catalog/add.qmd
                - api_reference/cli/catalog/ls.qmd
                - api_reference/cli/catalog/info.qmd
                - api_reference/cli/catalog/rm.qmd
                - api_reference/cli/catalog/diff-builds.qmd
        - id: python-api-section
          section: "Python API"
          contents:
            - id: core-operations-section
              section: "Core operations"
              contents:
                - reference/connect.qmd
                - reference/execute.qmd
                - href: reference/ls.qmd
                  text: "ls"
                - reference/memtable.qmd
                - reference/read_csv.qmd
                - reference/read_parquet.qmd
                - reference/deferred_read_csv.qmd
                - reference/deferred_read_parquet.qmd
                - reference/to_csv.qmd
                - reference/to_json.qmd
                - reference/to_parquet.qmd
                - reference/to_pyarrow.qmd
                - reference/to_pyarrow_batches.qmd
                - reference/to_sql.qmd
                - reference/register.qmd
                - reference/get_plans.qmd
            - id: types-schemas-section
              section: "Types and schemas"
              contents:
                - reference/datatypes.qmd
                - reference/schemas.qmd
            - id: data-operations-section
              section: "Data operations"
              contents:
                - reference/Column.qmd
                - reference/DateValue.qmd
                - reference/DayOfWeek.qmd
                - reference/FloatingColumn.qmd
                - reference/GroupedTable.qmd
                - reference/IntegerColumn.qmd
                - reference/IntervalValue.qmd
                - reference/NumericColumn.qmd
                - reference/Scalar.qmd
                - reference/StringValue.qmd
                - reference/Table.qmd
                - reference/TimeValue.qmd
                - reference/TimestampValue.qmd
                - reference/Value.qmd
                - reference/window.qmd
                - reference/selectors.qmd
            - id: udf-system-section
              section: "UDF system"
              contents:
                - reference/agg.pandas_df.qmd
                - reference/agg.pyarrow.qmd
                - reference/flight_udxf.qmd
                - reference/make_pandas_expr_udf.qmd
                - reference/make_pandas_udf.qmd
                - reference/pyarrow_udwf.qmd
            - id: ml-operations-section
              section: "ML operations"
              contents:
                - reference/train_test_splits.qmd
                - reference/Step.qmd
                - reference/Pipeline.qmd
                - reference/FittedPipeline.qmd
                - reference/FittedStep.qmd
                - reference/deferred_fit_predict.qmd
                - reference/deferred_fit_transform.qmd
                - reference/calc_split_column.qmd
                - reference/make_quickgrove_udf.qmd
            - id: caching-section
              section: "Caching"
              contents:
                - reference/ParquetCache.qmd
                - reference/ParquetSnapshotCache.qmd
                - reference/SourceCache.qmd
                - reference/SourceSnapshotCache.qmd
            - id: lineage-section
              section: "Lineage"
              contents:
                - reference/build_column_trees.qmd
                - reference/build_tree.qmd
                - reference/print_tree.qmd
            - id: flight-operations-section
              section: "Flight operations"
              contents:
                - reference/FlightServer.qmd
                - reference/FlightUrl.qmd
                - reference/make_udxf.qmd
            - id: catalog-operations-section
              section: "Catalog operations"
              contents:
                - reference/XorqCatalog.qmd
                - reference/Build.qmd
                - reference/Alias.qmd
                - reference/CatalogMetadata.qmd
        - id: troubleshooting-section
          section: "Troubleshooting"
          contents:
            - href: troubleshooting/index.qmd
            - href: troubleshooting/common_errors.qmd
            - href: troubleshooting/installation_issues.qmd
            - href: troubleshooting/pipeline_failures.qmd
            - href: troubleshooting/performance_problems.qmd
            - href: troubleshooting/backend_connection_issues.qmd
            - href: troubleshooting/caching_issues.qmd

      

format:
  html:
    theme:
      dark:  ["darkly", "style/dark.scss"]
      light: ["flatly", "style/light.scss"]
    toc: true
    code-copy: true
    code-overflow: wrap
    code-annotations: hover
    mermaid:
      theme: dark
    execute:
      eval: false  # Don't execute code blocks by default
    include-in-header: 
      - "style/google.html"
      - "style/typography-spacing.html"

quartodoc:
  package: xorq.api
  title: Python API
  sidebar: reference/_sidebar.yml
  render_interlinks: true
  renderer: _renderer.py
  options:
    signature_name: short
  sections:
    - title: Core Operations
      desc: "APIs for reading and returning data"
      contents:
        - name: connect
          dynamic: true
          signature_name: full
          package: xorq.api
        - name: execute
          dynamic: true
          signature_name: full
          package: xorq.api
        - name: memtable
          dynamic: true
          signature_name: full
          package: xorq.api
        - name: read_csv
          dynamic: true
          signature_name: full
          package: xorq.api
        - name: read_parquet
          dynamic: true
          signature_name: full
          package: xorq.api
        - name: deferred_read_csv
          dynamic: true
          signature_name: full
          package: xorq.api
        - name: deferred_read_parquet
          dynamic: true
          signature_name: full
          package: xorq.api
        - name: to_csv
          dynamic: true
          signature_name: full
          package: xorq.api
        - name: to_json
          dynamic: true
          signature_name: full
          package: xorq.api
        - name: to_parquet
          dynamic: true
          signature_name: full
          package: xorq.api
        - name: to_pyarrow
          dynamic: true
          signature_name: full
          package: xorq.api
        - name: to_pyarrow_batches
          dynamic: true
          signature_name: full
          package: xorq.api
        - name: to_sql
          dynamic: true
          signature_name: full
          package: xorq.api
        - name: register
          dynamic: true
          signature_name: full
          package: xorq.api
        - name: get_plans
          dynamic: true
          signature_name: full
          package: xorq.api

    - title: Data Operations
      desc:
      contents:
        - name: Table
          include_inherited: true
          package: xorq.vendor.ibis.expr.types.relations
        - name: GroupedTable
          package: xorq.vendor.ibis.expr.types.groupby
        - name: Value
          package: xorq.vendor.ibis.expr.types.generic
        - name: Scalar
          package: xorq.vendor.ibis.expr.types.generic
        - name: Column
          package: xorq.vendor.ibis.expr.types.generic
        - name: NumericColumn
          package: xorq.vendor.ibis.expr.types.numeric
        - name: IntegerColumn
          package: xorq.vendor.ibis.expr.types.numeric
        - name: FloatingColumn
          package: xorq.vendor.ibis.expr.types.numeric
        - name: StringValue
          package: xorq.vendor.ibis.expr.types.strings
        - name: TimeValue
          package: xorq.vendor.ibis.expr.types.temporal
        - name: DateValue
          package: xorq.vendor.ibis.expr.types.temporal
        - name: DayOfWeek
          package: xorq.vendor.ibis.expr.types.temporal
        - name: TimestampValue
          package: xorq.vendor.ibis.expr.types.temporal
        - name: IntervalValue
          package: xorq.vendor.ibis.expr.types.temporal

    - title: Caching
      package: xorq.caching
      desc: "Caching"
      contents:
         - ParquetCache
         - ParquetSnapshotCache
         - SourceCache
         - SourceSnapshotCache

    - title: Data Operations
      desc: "Table, column, and value types"
      contents:
        - name: window
          dynamic: true
          signature_name: full
          package: xorq.api
        - name: selectors
          dynamic: true
          signature_name: full
          package: xorq.api

    - title: Machine Learning Operations
      package: xorq.expr.ml
      desc: "Machine Learning Functions and Helpers"
      contents:
        - train_test_splits
        - Step
        - Pipeline
        - FittedPipeline
        - deferred_fit_predict
        - deferred_fit_transform
        - calc_split_column
        - make_quickgrove_udf

    - title: Lineage
      desc: "Data lineage tracking utilities"
      contents:
        - name: build_column_trees
          dynamic: true
          signature_name: full
          package: xorq.common.utils.lineage_utils
        - name: build_tree
          dynamic: true
          signature_name: full
          package: xorq.common.utils.lineage_utils
        - name: print_tree
          dynamic: true
          signature_name: full
          package: xorq.common.utils.lineage_utils

    - title: Flight Operations
      desc: "Apache Arrow Flight server and client operations"
      contents:
        - name: FlightServer
          package: xorq.flight
        - name: FlightUrl
          package: xorq.flight
        - name: make_udxf
          dynamic: true
          signature_name: full
          package: xorq.flight.exchanger

    - title: Catalog Operations
      desc: "Compute catalog management"
      contents:
        - name: XorqCatalog
          package: xorq.catalog
        - name: Build
          package: xorq.catalog
        - name: Alias
          package: xorq.catalog
        - name: CatalogMetadata
          package: xorq.catalog

    - title: Type System
      desc: "Data types and schemas"
      contents:
        - kind: page
          path: datatypes
          package: xorq.vendor.ibis.expr.datatypes.core
          summary:
            name: Data types
            desc: Scalar and column data types
          contents:
            - name: dtype
              package: ibis
              dynamic: true
              signature_name: full
            - DataType
            - Array
            - Binary
            - Boolean
            - Date
            - Decimal
            - Float16
            - Float32
            - Float64
            - INET
            - Int16
            - Int32
            - Int64
            - Int8
            - Interval
            - JSON
            - LineString
            - MACADDR
            - Map
            - MultiLineString
            - MultiPoint
            - MultiPolygon
            - "Null"
            - Point
            - Polygon
            - String
            - Struct
            - Time
            - Timestamp
            - UInt16
            - UInt32
            - UInt64
            - UInt8
            - UUID
        - kind: page
          path: schemas
          summary:
            name: Schemas
            desc: Table Schemas
          contents:
            - name: schema
              dynamic: true
              signature_name: full
            - name: Schema
              package: xorq.vendor.ibis.expr.schema

    - title: UDF System
      desc: "The functions for creating UDF"
      contents:
        - name: make_pandas_udf
          dynamic: true
          signature_name: full
          package: xorq.expr.udf
        - name: make_pandas_expr_udf
          dynamic: true
          signature_name: full
          package: xorq.expr.udf
        - name: pyarrow_udwf
          dynamic: true
          signature_name: full
          package: xorq.expr.udf
        - name: agg.pyarrow
          dynamic: true
          package: xorq.expr.udf
        - name: agg.pandas_df
          dynamic: true
          package: xorq.expr.udf
        - name: flight_udxf
          dynamic: true
          package: xorq.expr.relations