<!-- Bootstrap Icons -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">

<!-- Google Fonts - Brand Guidelines Fallbacks -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter+Tight:wght@400;500;600&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">

<style>
/* TOC title - use default Quarto styling (like Ibis) */
#TOC .toc-title,
.quarto-toc .toc-title,
#toc-title,
.table-of-contents h2 {
  font-size: 0.875rem !important;
  font-weight: 600 !important;
  text-transform: none !important;
  letter-spacing: normal !important;
  border-bottom: none !important;
  margin-bottom: 0.5rem !important;
}

/* Body text sizing - standard documentation sizing */
body {
  font-size: 0.9375rem;
  line-height: 1.6;
  letter-spacing: 0;
}

.quarto-content p,
main p {
  font-size: 0.9375rem;
  line-height: 1.6;
  letter-spacing: 0;
  margin-bottom: 1rem;
  max-width: 55ch;
}

/* Responsive heading sizes - exclude homepage */
body:not(.homepage) .quarto-content h1,
body:not(.homepage) main h1,
body:not(.homepage) .page-columns h1,
body:not(.homepage) h1 {
  font-size: clamp(2rem, 4.5vw, 2.5rem) !important;
  font-weight: 400;
  line-height: 1.0; /* Leading 1.0 per brand guidelines */
  letter-spacing: -0.03125rem; /* -5 tracking per brand guidelines */
}

/* Homepage hero H1 */
body.homepage .hero-section .hero-content h1,
body.homepage .hero-content h1,
body.homepage .hero-section h1,
.hero-section .hero-content h1,
.hero-content h1,
.hero-section h1 {
  font-size: clamp(2.75rem, 7.5vw, 4rem) !important;
  font-weight: 400 !important;
  line-height: 1.0 !important;
  letter-spacing: -0.5px !important;
}

/* Ensure homepage non-hero H1s stay small */
body.homepage .content-section h1 {
  font-size: clamp(2rem, 4.5vw, 2.5rem) !important;
}

body:not(.homepage) .quarto-content h2,
body:not(.homepage) main h2,
body:not(.homepage) .page-columns h2,
body:not(.homepage) h2 {
  font-size: clamp(1.5rem, 3.5vw, 2rem) !important;
  font-weight: 400;
  line-height: 1.0; /* Leading 1.0 per brand guidelines */
  letter-spacing: -0.03125rem; /* -5 tracking per brand guidelines */
}

body:not(.homepage) .quarto-content h3,
body:not(.homepage) main h3,
body:not(.homepage) .page-columns h3,
body:not(.homepage) h3 {
  font-size: 0.75rem !important;
  font-weight: 400;
  line-height: 1.6;
  letter-spacing: 0;
  text-transform: uppercase;
  max-width: 55ch;
}

body:not(.homepage) .quarto-content h3::before,
body:not(.homepage) main h3::before,
body:not(.homepage) .page-columns h3::before,
body:not(.homepage) h3::before {
  content: "[";
}

body:not(.homepage) .quarto-content h3::after,
body:not(.homepage) main h3::after,
body:not(.homepage) .page-columns h3::after,
body:not(.homepage) h3::after {
  content: "]";
}

body:not(.homepage) .quarto-content h4,
body:not(.homepage) main h4,
body:not(.homepage) .page-columns h4,
body:not(.homepage) h4 {
  font-size: 0.75rem !important;
  font-weight: 400;
  line-height: 1.6;
  letter-spacing: 0;
  text-transform: uppercase;
  max-width: 55ch;
}

body:not(.homepage) .quarto-content h4::before,
body:not(.homepage) main h4::before,
body:not(.homepage) .page-columns h4::before,
body:not(.homepage) h4::before {
  content: "[";
}

body:not(.homepage) .quarto-content h4::after,
body:not(.homepage) main h4::after,
body:not(.homepage) .page-columns h4::after,
body:not(.homepage) h4::after {
  content: "]";
}

body:not(.homepage) .quarto-content h5,
body:not(.homepage) main h5,
body:not(.homepage) .page-columns h5,
body:not(.homepage) h5 {
  font-size: 0.75rem !important;
  font-weight: 400;
  line-height: 1.6;
  letter-spacing: 0;
  text-transform: uppercase;
  max-width: 55ch;
}

body:not(.homepage) .quarto-content h5::before,
body:not(.homepage) main h5::before,
body:not(.homepage) .page-columns h5::before,
body:not(.homepage) h5::before {
  content: "[";
}

body:not(.homepage) .quarto-content h5::after,
body:not(.homepage) main h5::after,
body:not(.homepage) .page-columns h5::after,
body:not(.homepage) h5::after {
  content: "]";
}

body:not(.homepage) .quarto-content h3 .anchor,
body:not(.homepage) .quarto-content h4 .anchor,
body:not(.homepage) .quarto-content h5 .anchor,
body:not(.homepage) .quarto-content h3 a[href^="#"],
body:not(.homepage) .quarto-content h4 a[href^="#"],
body:not(.homepage) .quarto-content h5 a[href^="#"],
body:not(.homepage) main h3 .anchor,
body:not(.homepage) main h4 .anchor,
body:not(.homepage) main h5 .anchor,
body:not(.homepage) main h3 a[href^="#"],
body:not(.homepage) main h4 a[href^="#"],
body:not(.homepage) main h5 a[href^="#"],
body:not(.homepage) h3 .anchor,
body:not(.homepage) h4 .anchor,
body:not(.homepage) h5 .anchor,
body:not(.homepage) h3 a[href^="#"],
body:not(.homepage) h4 a[href^="#"],
body:not(.homepage) h5 a[href^="#"],
body:not(.homepage) h3:hover .anchor,
body:not(.homepage) h4:hover .anchor,
body:not(.homepage) h5:hover .anchor,
body:not(.homepage) h3:hover a[href^="#"],
body:not(.homepage) h4:hover a[href^="#"],
body:not(.homepage) h5:hover a[href^="#"],
body:not(.homepage) h3:focus .anchor,
body:not(.homepage) h4:focus .anchor,
body:not(.homepage) h5:focus .anchor,
body:not(.homepage) h3:focus a[href^="#"],
body:not(.homepage) h4:focus a[href^="#"],
body:not(.homepage) h5:focus a[href^="#"],
body:not(.homepage) h3:focus-within .anchor,
body:not(.homepage) h4:focus-within .anchor,
body:not(.homepage) h5:focus-within .anchor,
body:not(.homepage) h3:focus-within a[href^="#"],
body:not(.homepage) h4:focus-within a[href^="#"],
body:not(.homepage) h5:focus-within a[href^="#"] {
  display: none !important;
  opacity: 0 !important;
  visibility: hidden !important;
  width: 0 !important;
  height: 0 !important;
  margin: 0 !important;
  padding: 0 !important;
}


body:not(.homepage) .quarto-content h6,
body:not(.homepage) main h6,
body:not(.homepage) .page-columns h6,
body:not(.homepage) h6 {
  text-transform: uppercase;
}

/* Responsive heading sizing */
@media (max-width: 992px) {
  body:not(.homepage) .quarto-content h1,
  body:not(.homepage) main h1,
  body:not(.homepage) .page-columns h1,
  body:not(.homepage) h1 {
    font-size: 2.25rem !important;
  }
  
  /* Hero H1 stays large on tablet */
  body.homepage .hero-section .hero-content h1,
  body.homepage .hero-content h1,
  .hero-section .hero-content h1,
  .hero-content h1 {
    font-size: 3.25rem !important;
  }
  
  body:not(.homepage) .quarto-content h2,
  body:not(.homepage) main h2,
  body:not(.homepage) .page-columns h2,
  body:not(.homepage) h2 {
    font-size: 1.75rem !important;
  }
  
  body:not(.homepage) .quarto-content h3,
  body:not(.homepage) main h3,
  body:not(.homepage) .page-columns h3,
  body:not(.homepage) h3 {
    font-size: 1.5rem !important;
  }
  
  body:not(.homepage) .quarto-content h4,
  body:not(.homepage) main h4,
  body:not(.homepage) .page-columns h4,
  body:not(.homepage) h4 {
    font-size: 1.25rem !important;
  }
  
  body:not(.homepage) .quarto-content h5,
  body:not(.homepage) main h5,
  body:not(.homepage) .page-columns h5,
  body:not(.homepage) h5 {
    font-size: 1.125rem !important;
  }
}

@media (max-width: 576px) {
  body:not(.homepage) .quarto-content h1,
  body:not(.homepage) main h1,
  body:not(.homepage) .page-columns h1,
  body:not(.homepage) h1 {
    font-size: clamp(1.75rem, 6vw, 2.25rem) !important;
  }
  
  /* Hero H1 stays large even on mobile */
  body.homepage .hero-section .hero-content h1,
  body.homepage .hero-content h1,
  .hero-section .hero-content h1,
  .hero-content h1 {
    font-size: clamp(2.5rem, 7.5vw, 3.25rem) !important;
  }
}
  
  body:not(.homepage) .quarto-content h2,
  body:not(.homepage) main h2,
  body:not(.homepage) .page-columns h2,
  body:not(.homepage) h2 {
    font-size: clamp(1.5rem, 5.5vw, 1.875rem) !important;
  }
  
  body:not(.homepage) .quarto-content h3,
  body:not(.homepage) main h3,
  body:not(.homepage) .page-columns h3,
  body:not(.homepage) h3 {
    font-size: clamp(1.25rem, 4.5vw, 1.5rem) !important;
  }
  
  body:not(.homepage) .quarto-content h4,
  body:not(.homepage) main h4,
  body:not(.homepage) .page-columns h4,
  body:not(.homepage) h4 {
    font-size: 1.125rem !important;
  }
  
  body:not(.homepage) .quarto-content h5,
  body:not(.homepage) main h5,
  body:not(.homepage) .page-columns h5,
  body:not(.homepage) h5 {
    font-size: 1rem !important;
  }
}

/* Sidebar custom scrollbar - thin, minimal design */
#quarto-sidebar::-webkit-scrollbar,
.quarto-sidebar::-webkit-scrollbar {
  width: 4px;
}

#quarto-sidebar::-webkit-scrollbar-track,
.quarto-sidebar::-webkit-scrollbar-track {
  background: transparent;
}

#quarto-sidebar::-webkit-scrollbar-thumb,
.quarto-sidebar::-webkit-scrollbar-thumb {
  background: transparent;
  border-radius: 4px;
}

#quarto-sidebar::-webkit-scrollbar-thumb:hover,
.quarto-sidebar::-webkit-scrollbar-thumb:hover {
  background: rgba(128, 128, 128, 0.3);
}

[data-bs-theme="light"] #quarto-sidebar::-webkit-scrollbar-thumb:hover,
[data-bs-theme="light"] .quarto-sidebar::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.2);
}

/* Sidebar spacing - Mintlify style (left sidebar only, not TOC) */
.sidebar-navigation,
#quarto-sidebar {
  border-right: 1px solid rgba(255, 255, 255, 0.1);
  padding-top: 1rem;
  padding-bottom: 1rem;
  padding-left: 0;
  padding-right: 0;
}

[data-bs-theme="light"] .sidebar-navigation,
[data-bs-theme="light"] #quarto-sidebar {
  border-right: 1px solid rgba(0, 0, 0, 0.1);
}

/* Sidebar section headers - Mintlify spacing (left sidebar only) */
.sidebar-navigation .sidebar-section-header,
#quarto-sidebar .sidebar-section-header,
.sidebar-navigation h6,
#quarto-sidebar h6 {
  margin-top: 1.5rem;
  margin-bottom: 0.5rem;
  padding: 0.5rem 1rem 0.25rem 1rem;
  padding-right: 0;
  font-size: 0.6875rem;
  font-weight: bold;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: rgba(255, 255, 255, 0.5);
}

.sidebar-navigation .sidebar-section-header:first-child,
#quarto-sidebar .sidebar-section-header:first-child,
.sidebar-navigation h6:first-child,
#quarto-sidebar h6:first-child {
  margin-top: 0;
}

/* Sidebar links (left sidebar only) - bubble design */
/* Default (dark mode) sidebar styling */
[data-bs-theme="dark"] .sidebar-navigation .sidebar-item a,
[data-bs-theme="dark"] #quarto-sidebar .sidebar-item a,
[data-bs-theme="dark"] .sidebar-navigation a:not(.sidebar-section-header):not(h6),
[data-bs-theme="dark"] #quarto-sidebar a:not(.sidebar-section-header):not(h6) {
  display: block;
  padding: 0.5rem 1rem;
  color: rgba(255, 255, 255, 0.7);
  text-decoration: none;
  font-size: 0.875rem;
  line-height: 1.5;
  transition: all 0.2s ease;
  margin: 0 0.5rem 0 0.5rem;
  margin-right: 0;
  border-radius: 0.75rem;
}

/* Fallback for when theme is not set (defaults to dark) - exclude light mode */
:not([data-bs-theme="light"]) .sidebar-navigation .sidebar-item a,
:not([data-bs-theme="light"]) #quarto-sidebar .sidebar-item a,
:not([data-bs-theme="light"]) .sidebar-navigation a:not(.sidebar-section-header):not(h6),
:not([data-bs-theme="light"]) #quarto-sidebar a:not(.sidebar-section-header):not(h6) {
  display: block;
  padding: 0.5rem 1rem;
  color: rgba(255, 255, 255, 0.7);
  text-decoration: none;
  font-size: 0.875rem;
  line-height: 1.5;
  transition: all 0.2s ease;
  margin: 0 0.5rem 0 0.5rem;
  margin-right: 0;
  border-radius: 0.75rem;
}

/* Dark mode hover */
[data-bs-theme="dark"] .sidebar-navigation .sidebar-item a:hover,
[data-bs-theme="dark"] #quarto-sidebar .sidebar-item a:hover,
[data-bs-theme="dark"] .sidebar-navigation a:hover:not(.sidebar-section-header):not(h6),
[data-bs-theme="dark"] #quarto-sidebar a:hover:not(.sidebar-section-header):not(h6) {
  color: rgba(255, 255, 255, 0.9);
  background: rgba(255, 255, 255, 0.05);
  border-radius: 0.75rem;
}

/* Fallback hover (when theme not set) - exclude light mode */
:not([data-bs-theme="light"]) .sidebar-navigation .sidebar-item a:hover,
:not([data-bs-theme="light"]) #quarto-sidebar .sidebar-item a:hover,
:not([data-bs-theme="light"]) .sidebar-navigation a:hover:not(.sidebar-section-header):not(h6),
:not([data-bs-theme="light"]) #quarto-sidebar a:hover:not(.sidebar-section-header):not(h6) {
  color: rgba(255, 255, 255, 0.9);
  background: rgba(255, 255, 255, 0.05);
  border-radius: 0.75rem;
}

/* Active sidebar item - dark mode */
[data-bs-theme="dark"] .sidebar-navigation .sidebar-item a.active,
[data-bs-theme="dark"] #quarto-sidebar .sidebar-item a.active,
[data-bs-theme="dark"] .sidebar-navigation a.active:not(.sidebar-section-header):not(h6),
[data-bs-theme="dark"] #quarto-sidebar a.active:not(.sidebar-section-header):not(h6),
[data-bs-theme="dark"] .sidebar-navigation a[aria-current="page"]:not(.sidebar-section-header):not(h6),
[data-bs-theme="dark"] #quarto-sidebar a[aria-current="page"]:not(.sidebar-section-header):not(h6) {
  color: #79E2FF;
  background: rgba(121, 226, 255, 0.1);
  font-weight: 500;
  border-radius: 0.75rem;
}

/* Fallback active (when theme not set) - exclude light mode */
:not([data-bs-theme="light"]) .sidebar-navigation .sidebar-item a.active,
:not([data-bs-theme="light"]) #quarto-sidebar .sidebar-item a.active,
:not([data-bs-theme="light"]) .sidebar-navigation a.active:not(.sidebar-section-header):not(h6),
:not([data-bs-theme="light"]) #quarto-sidebar a.active:not(.sidebar-section-header):not(h6),
:not([data-bs-theme="light"]) .sidebar-navigation a[aria-current="page"]:not(.sidebar-section-header):not(h6),
:not([data-bs-theme="light"]) #quarto-sidebar a[aria-current="page"]:not(.sidebar-section-header):not(h6) {
  color: #79E2FF;
  background: rgba(121, 226, 255, 0.1);
  font-weight: 500;
  border-radius: 0.75rem;
}

/* Sidebar nested items - indentation (left sidebar only) */
.sidebar-navigation .sidebar-item .sidebar-item,
#quarto-sidebar .sidebar-item .sidebar-item {
  margin-left: 0.25rem;
}

/* Nested sidebar items - exclude light mode from default white text */
:not([data-bs-theme="light"]) .sidebar-navigation .sidebar-item .sidebar-item a,
:not([data-bs-theme="light"]) #quarto-sidebar .sidebar-item .sidebar-item a {
  padding-left: 1.5rem;
  padding-right: 1rem;
  font-size: 0.8125rem;
  margin-left: 0.5rem;
  margin-right: 0;
  color: rgba(255, 255, 255, 0.7);
}

/* Light mode nested sidebar items */
[data-bs-theme="light"] .sidebar-navigation .sidebar-item .sidebar-item a,
[data-bs-theme="light"] #quarto-sidebar .sidebar-item .sidebar-item a,
[data-bs-theme="light"] .quarto-sidebar .sidebar-item .sidebar-item a {
  color: #05181A !important;
}

/* Sidebar navigation container (left sidebar only) */
.sidebar-navigation nav,
#quarto-sidebar nav,
.sidebar-navigation .sidebar-menu,
#quarto-sidebar .sidebar-menu {
  padding: 0;
  margin: 0;
}

/* Sidebar item spacing (left sidebar only) */
.sidebar-navigation .sidebar-item,
#quarto-sidebar .sidebar-item {
  margin: 0;
  padding: 0;
}

/* Light mode adjustments (left sidebar only) */
[data-bs-theme="light"] .sidebar-navigation,
[data-bs-theme="light"] #quarto-sidebar {
  border-right-color: rgba(5, 24, 26, 0.1);
}

[data-bs-theme="light"] .sidebar-navigation h6,
[data-bs-theme="light"] #quarto-sidebar h6 {
  color: rgba(5, 24, 26, 0.5);
}

/* Light mode sidebar styling is handled by light.scss */

/* Light mode sidebar active state is handled by light.scss */

/* Sidebar section icon styling (left sidebar only) */
.sidebar-navigation .bi,
#quarto-sidebar .bi {
  display: inline-block;
  vertical-align: middle;
  line-height: 1;
}

/* Thin line after last item in each sidebar group - modern look (left sidebar only) */
.sidebar-navigation [id] > .sidebar-item:last-child a,
#quarto-sidebar [id] > .sidebar-item:last-child a,
.quarto-sidebar [id] > .sidebar-item:last-child a {
  border-bottom: 1px solid rgba(193, 240, 255, 0.3) !important;
  padding-bottom: 0.75rem !important;
  margin-bottom: 0.5rem !important;
}

/* Sidebar section dividers - CSS fallback */
#quarto-sidebar [id] > .sidebar-item:last-child a,
.quarto-sidebar [id] > .sidebar-item:last-child a {
  border-bottom: 1px solid rgba(193, 240, 255, 0.3) !important;
  padding-bottom: 0.75rem !important;
  margin-bottom: 0.5rem !important;
}

/* Light mode adjustments for separator lines (left sidebar only) */
[data-bs-theme="light"] .sidebar-navigation [id] > .sidebar-item:last-child a,
[data-bs-theme="light"] #quarto-sidebar [id] > .sidebar-item:last-child a,
[data-bs-theme="light"] .quarto-sidebar [id] > .sidebar-item:last-child a {
  border-bottom: 1px solid rgba(5, 24, 26, 1) !important;
}

/* Light mode sidebar styling is handled by light.scss */

/* Mermaid diagram styling - responsive and screen-fitting */
.mermaid,
.quarto-content .mermaid,
main .mermaid,
.quarto-content figure .mermaid,
main figure .mermaid {
  max-width: 100% !important;
  width: 100% !important;
  overflow-x: auto;
  margin: 1.5rem 0;
  display: block;
}

/* Mermaid SVG elements - make responsive */
.mermaid svg,
.quarto-content .mermaid svg,
main .mermaid svg {
  max-width: 100% !important;
  height: auto !important;
  display: block;
  margin: 0 auto;
}

/* Mermaid figure containers - constrain to content width */
.quarto-content figure:has(.mermaid),
main figure:has(.mermaid),
.quarto-content .cell-output:has(.mermaid),
main .cell-output:has(.mermaid) {
  max-width: 100% !important;
  width: 100% !important;
  margin: 1.5rem 0;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}

/* Tablet sizes - ensure proper scaling */
@media (max-width: 992px) and (min-width: 769px) {
  .mermaid,
  .quarto-content .mermaid,
  main .mermaid {
    font-size: 0.9rem;
  }
  
  .mermaid svg,
  .quarto-content .mermaid svg,
  main .mermaid svg {
    font-size: 0.8rem;
  }
}

/* Ensure mermaid diagrams don't overflow on mobile */
@media (max-width: 768px) {
  .mermaid,
  .quarto-content .mermaid,
  main .mermaid {
    font-size: 0.875rem;
    margin: 1rem 0;
  }
  
  .mermaid svg,
  .quarto-content .mermaid svg,
  main .mermaid svg {
    font-size: 0.75rem;
    max-width: 100%;
    height: auto;
  }
}

/* Very small screens (phones) */
@media (max-width: 576px) {
  .mermaid,
  .quarto-content .mermaid,
  main .mermaid {
    font-size: 0.75rem;
    margin: 0.75rem 0;
  }
  
  .mermaid svg,
  .quarto-content .mermaid svg,
  main .mermaid svg {
    font-size: 0.65rem;
    max-width: 100%;
    height: auto;
  }
  
  /* Ensure horizontal scrolling works smoothly on small screens */
  .quarto-content figure:has(.mermaid),
  main figure:has(.mermaid) {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }
}

/* Large screens - constrain to readable width */
@media (min-width: 1200px) {
  .mermaid,
  .quarto-content .mermaid,
  main .mermaid {
    max-width: 90%;
    margin-left: auto;
    margin-right: auto;
  }
}

/* General image responsive styling for all pages */
.quarto-content figure img,
main figure img,
.quarto-content img,
main img {
  max-width: 100%;
  height: auto;
}

.quarto-content figure,
main figure {
  max-width: 100%;
  margin: 1.5rem 0;
}

/* Responsive images on small screens */
@media (max-width: 768px) {
  .quarto-content figure img,
  main figure img,
  .quarto-content img,
  main img {
    max-width: 100%;
    height: auto;
  }
  
  .quarto-content figure,
  main figure {
    margin: 1rem 0;
    overflow-x: auto;
  }
}

@media (max-width: 576px) {
  .quarto-content figure img,
  main figure img,
  .quarto-content img,
  main img {
    max-width: 100%;
    height: auto;
  }
  
  .quarto-content figure,
  main figure {
    margin: 0.75rem 0;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }
}

/* Theme-aware image display for architecture diagrams */
.light-only {
  display: none;
}

.dark-only {
  display: block;
}

[data-bs-theme="light"] .light-only {
  display: block;
}

[data-bs-theme="light"] .dark-only {
  display: none;
}

[data-bs-theme="dark"] .light-only {
  display: none;
}

[data-bs-theme="dark"] .dark-only {
  display: block;
}

/* Architecture images - make them larger and more visible */
.light-only img[src*="architecture"],
.dark-only img[src*="architecture"],
figure:has(img[src*="architecture"]) img {
  max-width: 100% !important;
  width: auto !important;
  height: auto !important;
  min-width: 700px;
}

figure:has(img[src*="architecture"]) {
  max-width: 100% !important;
  width: 100% !important;
  margin: 2rem 0 !important;
  text-align: center;
}

/* On smaller screens, allow horizontal scroll for architecture images */
@media (max-width: 1200px) {
  figure:has(img[src*="architecture"]) {
    overflow-x: auto;
  }
  
  .light-only img[src*="architecture"],
  .dark-only img[src*="architecture"],
  figure:has(img[src*="architecture"]) img {
    min-width: 900px;
  }
}
</style>

<script>
// Add Bootstrap Icons to sidebar sections using JavaScript (more reliable)
(function() {
  // Wait for DOM to be ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', addSidebarIcons);
  } else {
    addSidebarIcons();
  }

  function addSidebarIcons() {
    // Icon mapping for sidebar sections (Mintlify style)
    const iconMap = {
      'getting-started': 'rocket',
      'tutorials': 'book',
      'guides': 'journal-text',
      'concepts': 'lightbulb',
      'reference': 'list-ul',
      'api-reference': 'code-slash',
      'cli-reference': 'terminal',
      'troubleshooting': 'wrench'
    };

    // Find sidebar section headers by looking for h6 elements with section titles
    // Quarto generates sidebar sections with h6 headers containing the section title
    const sidebarHeaders = document.querySelectorAll('.quarto-sidebar h6, .sidebar h6, .quarto-sidebar .sidebar-section-header, .sidebar .sidebar-section-header');
    
    sidebarHeaders.forEach(header => {
      const headerText = header.textContent.trim().toLowerCase();
      const parentSection = header.closest('[id]');
      const sectionId = parentSection ? parentSection.id : '';
      
      // Skip if icon already exists
      if (header.querySelector('.bi')) {
        return;
      }
      
      // Try to match by section ID first (more reliable)
      let matchedIcon = null;
      for (const [key, icon] of Object.entries(iconMap)) {
        if (sectionId && sectionId.startsWith(key)) {
          matchedIcon = icon;
          break;
        }
      }
      
      // Fallback: match by header text
      if (!matchedIcon) {
        for (const [key, icon] of Object.entries(iconMap)) {
          const keyWords = key.split('-');
          if (keyWords.some(word => headerText.includes(word))) {
            matchedIcon = icon;
            break;
          }
        }
      }
      
      if (matchedIcon) {
        // Create icon element
        const iconEl = document.createElement('i');
        iconEl.className = `bi bi-${matchedIcon}`;
        iconEl.setAttribute('aria-hidden', 'true');
        iconEl.style.marginRight = '0.5rem';
        iconEl.style.fontSize = '0.875rem';
        iconEl.style.display = 'inline-block';
        iconEl.style.verticalAlign = 'middle';
        
        // Insert icon before header text
        header.insertBefore(iconEl, header.firstChild);
      }
    });
    
    // Add thin separator lines after last item in each sidebar group (fallback for complex structures)
    addGroupSeparators();
  }
  
  function addGroupSeparators() {
    // Find all sidebar sections with IDs
    const sidebarSections = document.querySelectorAll('#quarto-sidebar [id], .quarto-sidebar [id], .sidebar [id]');
    
    sidebarSections.forEach(section => {
      // Get direct children that are sidebar items
      const directItems = Array.from(section.children).filter(
        el => el.classList.contains('sidebar-item')
      );
      
      if (directItems.length === 0) return;
      
      // Find the last direct sidebar item
      const lastItem = directItems[directItems.length - 1];
      const link = lastItem.querySelector('a');
      
      if (link) {
        const isLightMode = document.documentElement.getAttribute('data-bs-theme') === 'light';
        // Blue Sky (#C1F0FF) on dark mode, Midnight (#05181A) on light mode
        link.style.setProperty('border-bottom', `1px solid ${isLightMode ? 'rgba(5, 24, 26, 1)' : 'rgba(193, 240, 255, 0.3)'}`, 'important');
        link.style.setProperty('padding-bottom', '0.75rem', 'important');
        link.style.setProperty('margin-bottom', '0.5rem', 'important');
      }
    });
    
    // Also add dividers after section headers (h6 elements)
    const sectionHeaders = document.querySelectorAll('#quarto-sidebar h6, .quarto-sidebar h6, .sidebar h6');
    sectionHeaders.forEach(header => {
      const parentSection = header.closest('[id]');
      if (!parentSection) return;
      
      const nextSibling = header.nextElementSibling;
      if (nextSibling && nextSibling.classList.contains('sidebar-item')) {
        const link = nextSibling.querySelector('a');
        if (link && link.previousElementSibling === header) {
          const isLightMode = document.documentElement.getAttribute('data-bs-theme') === 'light';
          link.style.setProperty('border-top', `1px solid ${isLightMode ? 'rgba(5, 24, 26, 1)' : 'rgba(193, 240, 255, 0.3)'}`, 'important');
          link.style.setProperty('padding-top', '0.75rem', 'important');
          link.style.setProperty('margin-top', '0.5rem', 'important');
        }
      }
    });
  }
})();
</script>

